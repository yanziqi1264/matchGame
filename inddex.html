
<!DOCTYPE HTML>
<HTML>
<head>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>火柴357游戏</title>
	
</head>
<style type="text/css">
.macth {
	width: 700px	;
	height: 150px;
}
	.macth div{
		height: 50px; 
		width: 50px;
		background-color: yellowgreen;
		float: left;
		margin: 20px;
	}
</style>
<body>
	<div  id="textDiv" style="height: 100px; width: 700px;margin: 20px;text-align: center;left:25%; position: absolute; "></div>
	<div style="height: 500px; width: 700px;background-color:grey; margin: 20px;text-align: center;left:25%; top:20%;position: absolute; ">
		<div id="line1"  class="macth">
		</div></break>
		<div id="line2"  class="macth"></div></break>
		<div id="line3"  class="macth"></div>
		<input type="button" value="玩家1取" onclick="removeMacth(1)"/>
		<input type="text" name="" min="1" max="3" placeholder="输入行数" id="row"/>
		<input type="text" name=""  min="1" max="7"  placeholder="输入取出盒子数量" id="num"/>
		<input type="button" value="玩家2取" onclick="removeMacth(2)"/>
	</div>



</body>
<script type="text/javascript">
	let macth=""
	var a ="111";
	var b ="11111";
	var c ="1111111";
	var line1=document.getElementById("line1");
	var line2=document.getElementById("line2");
	var line3=document.getElementById("line3");
	var rowObj = document.getElementById("row");
	var numObj = document.getElementById("num");
	var textDivObj = document.getElementById("textDiv");
	//当前该操作人
	var handleFlag = 1;
	init();

	function reset(){
		location.reload();
	}

	function init(){
		
		initGame(line1,a);
		initGame(line2,b);
		initGame(line3,c);
	}
	function initGame(obj,row){
		for(let i = 0;i<row.length;i++){
			obj.appendChild(document.createElement("div"));
		}
	}

	function removeChild(obj,num){
		while(num > 0){
			obj.removeChild(obj.lastElementChild);
			num --;
		}
	}
	/*
	取火柴
	*/
	function removeMacth(flag) {
		var wjTxt = "玩家"+handleFlag;
		if (handleFlag != flag) {
			alert("应该是"+wjTxt+"取");
			return;
		}
		var row = rowObj.value;
		var num = numObj.value;
		if(row =='' || num ==''){
			alert("请输入行数，和数量");
			return;
		}
		
		
		var text = handleFlag
		switch (row) {
		  case  '1':
			  	if(a.length < num){
			  		alert('火柴数量不够');
			  		return;
			  	}
			  	removeChild(line1,num);
			  	a = a.substr(0,a.length- num);
		    break;
		  case '2':
			  	if(b.length < num){
			  		alert('火柴数量不够');
			  		return;
			  	}
			  	removeChild(line2,num);
			  	b = b.substr(0,b.length -num);
		    break;
		  case '3':
		  		if(c.length < 0){
		  		alert('火柴数量不够');
		  		return;
		  		}
			  	removeChild(line3,num);
			  	c = c.substr(0,c.length -num);
		    break;
		  default:  
		  		alert("请输入正确行数");
		  		return;
		}
		handleFlag = flag == 1? 2:1;
		wjTxt =wjTxt+"取走了第"+row+"行："+num+"个盒子,轮到玩家"+handleFlag;
		textDivObj.innerText   = wjTxt;
		rowObj.value="";
		numObj.value="";
		if(a.length +b.length + c.length <= 1){

			if(flag == 1){
				alert("玩家1胜利");
			}else{
				alert("玩家2胜利");
			}
			reset();
		}
	}

	

</script>
</HTML>
